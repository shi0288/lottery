<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mcp.lottery.mapper.UserOrderLogMapper">

    <resultMap id="ResultMapForUser" type="com.mcp.lottery.model.UserOrderLog">
        <id column="id" jdbcType="BIGINT" property="id"/>
        <result column="rate" property="rate"/>
        <result column="result"  property="result"/>
        <result column="game" property="game"/>
        <result column="money"  property="money"/>
        <result column="code"  property="code"/>
        <result column="create_at" jdbcType="TIMESTAMP" property="createAt"/>
        <association property="plat" javaType="com.mcp.lottery.model.Plat">
            <result column="plat_id"  property="id"/>
            <result column="name"  property="name"/>
        </association>
        <association property="user" javaType="com.mcp.lottery.model.User">
            <result column="uid"  property="id"/>
            <result column="username"  property="username"/>
        </association>
    </resultMap>


    <select id="getAll" resultMap="ResultMapForUser">
        SELECT  a.*,b.username,c.name from user_order_log a left join user b on a.uid=b.id left join plat c on a.plat_id=c.id
        WHERE a.uid=#{uid} order by a.create_at desc;
    </select>





</mapper>